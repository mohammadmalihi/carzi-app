import React, { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { useNavigate } from "react-router-dom";
import { Row, Col } from "react-bootstrap";
import { FaAngleLeft } from "react-icons/fa";
import "bootstrap/dist/css/bootstrap.min.css";
import SVGIcon from "../icon/SvgIcon/SvgIcon";
import img1 from "../servicesSearch/assets/Component 196.png";
import img2 from "../servicesSearch/assets/Component 197.png";
import img3 from "../servicesSearch/assets/Component 198.png";
import img4 from "../servicesSearch/assets/Component 199.png";
import img5 from "../servicesSearch/assets/Component 200.png";
import img6 from "../servicesSearch/assets/Component 201.png";
import img7 from "../servicesSearch/assets/Component 204.png";
import img8 from "../servicesSearch/assets/Component 205.png";
import img9 from "../servicesSearch/assets/Component 206.png";
import img10 from "../servicesSearch/assets/Component 207.png";
import img11 from "../servicesSearch/assets/Component 208.png";
import img12 from "../servicesSearch/assets/Component 209.png";

import styles from "../../../css/main.module.scss";

const pathData = [
  {
    id: "part1",
    d: "M64.67 879.93h204.55l227.67-147.4 227.64 147.38 204.56-.01V745.59L653.96 570.68 929.1 370.79V247.01l3.79-2.26c4.95-2.94 8.43-7.57 10.01-12.76 1.57-5.16 1.3-10.92-1.19-16.2-3.36-7.09-7.2-13.92-11.46-20.44a174.52 174.52 0 00-14.16-18.81 175.38 175.38 0 00-15.67-15.99c-5.51-4.93-11.4-9.57-17.63-13.85l-1.68-1.2c-6.05-4.07-12.4-7.68-18.96-10.79-6.74-3.19-13.68-5.89-20.74-8.04a152.2 152.2 0 00-21.66-4.92 145.13 145.13 0 00-21.72-1.66c-7.07 0-14.09.52-21.03 1.53a154.15 154.15 0 00-20.96 4.59c-6.87 2.02-13.57 4.52-20.02 7.48-6.37 2.92-12.56 6.32-18.49 10.16-72.79 45.06-145.19 91.52-217.57 137.3L282.22 143.79c-5.99-3.84-12.22-7.22-18.62-10.15-6.39-2.91-12.98-5.38-19.7-7.37-6.69-1.97-13.58-3.48-20.59-4.5a152.86 152.86 0 00-21.17-1.61l-.24.03c-7.23 0-14.54.58-21.85 1.69-7.37 1.11-14.54 2.74-21.43 4.83-7.02 2.14-13.94 4.81-20.65 7.97-6.63 3.13-12.99 6.71-18.99 10.72l-.23.14a177.74 177.74 0 00-18.47 14.28 174.832 174.832 0 00-16.44 16.67c-5.13 5.95-9.87 12.24-14.15 18.82-4.25 6.52-8.09 13.37-11.44 20.46a22.552 22.552 0 00-1.86 13.3c.75 4.44 2.81 8.68 6.06 12.01l2.2 5.35v124.23l271.38 202.45L64.65 745.65v134.29zm48.14-606.36l348.45 219.88-91.87 58.41c-89.48-66.7-178.88-133.54-268.37-200.22v-85.5l11.79 7.44zm104.05-107.29c4.76.72 9.57 1.8 14.37 3.21 4.83 1.43 9.51 3.17 13.96 5.19 4.47 2.06 8.8 4.41 12.95 7.06l217.67 137.39v130.24L108.58 217.63l5.19-6.69 4.13-5.02c3.77-4.37 7.86-8.52 12.22-12.39 4.31-3.82 8.89-7.36 13.67-10.56 4.38-2.93 8.93-5.5 13.58-7.71 4.59-2.18 9.39-4.04 14.31-5.53 5.02-1.53 10.06-2.69 15.05-3.45 4.96-.75 10.13-1.15 15.42-1.17h.15c4.97.04 9.84.43 14.55 1.14zm296.7 343.04l379.17-239.24v81.44L530.45 614.74v52.01L260.63 841.42l-4.18 1.26H101.02v-76.31l397.04-252.43 4-1.17c1.95-.04 3.97-.36 5.98-.96 1.93-.57 3.8-1.41 5.53-2.5zm10.59-73.87V319.14l217.71-137.36c4.15-2.68 8.54-5.08 13.07-7.17 4.52-2.07 9.15-3.82 13.83-5.19 4.66-1.37 9.48-2.41 14.4-3.1 4.95-.7 9.93-1.06 14.89-1.06 5.19 0 10.37.38 15.45 1.11 5.04.73 10.02 1.85 14.89 3.33 4.78 1.46 9.52 3.32 14.11 5.52 4.57 2.2 9.03 4.75 13.29 7.61l1.78 1.13c4.57 3.17 8.91 6.6 12.94 10.22 4.06 3.65 7.92 7.6 11.55 11.8 3.02 3.03 6.81 8.39 9.4 11.64L524.14 449.37v-13.93zm45.82 196.27l47.57-34.54 4.48-1.48 4.12 1.2 266.57 169.47v76.28H737.29l-4.18-1.23-202.17-130.88 35.84-23.21v-53.3l3.19-2.31z",
    active: true,
    fill: " rgb(150, 122, 217)",
  },
  {
    id: "part2",
    d: "M888.68 671.1L765.11 835.85c-12.8 17.06-29.38 30.69-48.09 40.04-18.74 9.37-39.6 14.48-60.89 14.48H209.31V655.75l3.72-2.21c2.96-1.76 5.89-3.69 8.72-5.74 2.74-1.99 5.43-4.15 8.06-6.45 25.91-22.8 58.41-34.2 90.87-34.2 32.35 0 64.7 11.32 90.56 33.94 1.57 1.13 3.3 2.74 5.43 4.72 8.59 7.99 25.31 23.54 52.98 23.54h186.48c9.18 0 17.52 3.74 23.54 9.76 6.02 6.03 9.76 14.36 9.76 23.54s-3.74 17.52-9.76 23.54-14.36 9.76-23.54 9.76H450.22c-5.03 0-9.59 2.03-12.87 5.31a18.152 18.152 0 00-5.31 12.87c0 5.03 2.04 9.59 5.31 12.87 3.28 3.28 7.84 5.31 12.87 5.31h223.16a69.73 69.73 0 0050.97-22.16l113.31-121.64c3.17-3.4 6.93-6.06 11.07-7.85a33.31 33.31 0 0113.29-2.77c7.66 0 14.43 2.5 19.84 6.55 4.23 3.17 7.61 7.3 9.91 11.93s3.56 9.79 3.56 15.01c0 6.75-2.08 13.64-6.66 19.75zm12.39-235.89l-88.45-59.45V119.83c0-6.98-2.83-13.3-7.4-17.87a25.197 25.197 0 00-17.87-7.4H656.02c-6.98 0-13.3 2.83-17.87 7.4a25.197 25.197 0 00-7.4 17.87v41.28L514.78 78.02c-2.18-1.56-4.54-2.76-6.98-3.54a25.37 25.37 0 00-7.74-1.19c-2.98 0-5.99.31-8.63 1.13-1.94.62-3.71 1.52-5.07 2.78l-387.43 358-.8.62c-3.34 2.33-6.04 5.46-7.91 9.05-1.86 3.51-2.86 7.52-2.86 11.68 0 6.98 2.83 13.3 7.4 17.87s10.89 7.4 17.87 7.4c2.78 0 5.59-.26 8.05-.93 2.19-.62 4.16-1.55 5.62-2.93l372.92-348.91 142.07 101.8c2.18 1.56 4.54 2.76 6.98 3.54 2.43.78 5.05 1.19 7.74 1.19 6.98 0 13.3-2.83 17.87-7.4s7.4-10.89 7.4-17.87v-65.2h80.79v244.11c0 4.24 1.04 8.32 2.94 11.89 1.92 3.61 4.72 6.75 8.2 9.09l100.12 67.31c2.07 1.39 4.34 2.46 6.69 3.17 2.37.69 4.85 1.06 7.35 1.06 6.98 0 13.3-2.83 17.87-7.4s7.4-10.89 7.4-17.87c0-4.65-7.03-15.08-11.07-20.57l-.51-.69zM461.74 285.15h-38.9c-4.27 0-8.17 1.75-10.98 4.56-2.8 2.82-4.56 6.71-4.56 10.98v38.91c0 4.26 1.76 8.15 4.57 10.96 2.8 2.81 6.69 4.56 10.97 4.56h38.9c4.26 0 8.15-1.75 10.96-4.56 2.81-2.81 4.57-6.7 4.57-10.96v-38.91c0-4.26-1.76-8.15-4.57-10.96-2.81-2.81-6.7-4.57-10.96-4.57zm0 98.46h-38.9c-4.28 0-8.17 1.75-10.98 4.56-2.8 2.83-4.56 6.71-4.56 10.98v38.91c0 4.26 1.76 8.15 4.57 10.96 2.8 2.81 6.69 4.57 10.97 4.57h38.9c4.26 0 8.15-1.76 10.96-4.57 2.81-2.81 4.57-6.7 4.57-10.96v-38.91c0-4.26-1.76-8.15-4.57-10.96-2.81-2.81-6.7-4.57-10.96-4.57zm103.94-98.46h-38.91c-4.26 0-8.15 1.75-10.96 4.57-2.81 2.81-4.56 6.7-4.56 10.96v38.91c0 4.26 1.75 8.15 4.56 10.96 2.81 2.81 6.7 4.56 10.96 4.56h38.91c4.26 0 8.15-1.75 10.96-4.56 2.81-2.81 4.57-6.7 4.57-10.96v-38.91c0-4.26-1.76-8.15-4.57-10.96-2.8-2.82-6.69-4.57-10.96-4.57zm0 98.46h-38.91c-4.26 0-8.15 1.76-10.96 4.57-2.81 2.81-4.56 6.7-4.56 10.96v38.91c0 4.26 1.75 8.15 4.56 10.96 2.81 2.81 6.7 4.57 10.96 4.57h38.91c4.26 0 8.15-1.76 10.96-4.57 2.81-2.81 4.57-6.7 4.57-10.96v-38.91c0-4.26-1.76-8.15-4.57-10.96-2.81-2.81-6.7-4.57-10.96-4.57zM165.39 890.37h-60.75V617.86h35.02c9.18 0 17.51 3.74 23.54 9.76 6.02 6.02 9.76 14.36 9.76 23.54v239.2h-7.56zm696.64-308.85a69.38 69.38 0 00-23.97 4.28 70.216 70.216 0 00-20.83 12.06l-36.66 38.52c-17.91 19.43-36.02 38.7-54.03 58.04l-3.87-12.44c-4.45-14.34-13.46-26.72-25.3-35.44-11.54-8.5-25.81-13.53-41.24-13.53H469.66c-8.23 0-17.42-6.8-30-16.09-24-17.73-62.09-45.88-118.98-45.88-20.87 0-41.31 3.68-60.41 10.69-19.15 7.03-36.99 17.4-52.62 30.76l-6.3 5.38-4.78-6.77a70.32 70.32 0 00-24.95-21.78c-9.56-4.97-20.44-7.78-31.96-7.78H86.47c-5.03 0-9.59 2.04-12.87 5.31-3.27 3.3-5.31 7.85-5.31 12.87v308.85c0 5.03 2.03 9.59 5.31 12.87 3.28 3.28 7.84 5.31 12.87 5.31h569.67c27.06 0 53.48-6.45 77.16-18.28 23.72-11.86 44.74-29.13 60.94-50.74l123.57-164.75c9.58-12.77 13.91-27.17 13.91-41.28 0-11.02-2.65-21.87-7.5-31.6-4.87-9.77-11.93-18.42-20.71-25.01-11.2-8.4-25.32-13.55-41.47-13.55z",
    active: true,
    fill: " rgb(255, 94, 111) ",
  },
  {
    id: "part3",
    d: "M734.54 66.5l155.5-17.52-9.86 163.17-57.54-57.54-283.87 283.87-181-105.59-188.46 177.2-32.89-34.97 214.57-201.76 179.9 104.94 257.72-257.72-54.08-54.09zm177.65 613.44L781.14 854.65c-13.57 18.09-31.15 32.54-51 42.46-19.88 9.94-42 15.35-64.57 15.35H191.72v-248.8l3.94-2.35c3.15-1.87 6.25-3.91 9.26-6.09 2.91-2.11 5.76-4.4 8.54-6.84 27.47-24.18 61.93-36.27 96.36-36.27 34.3 0 68.62 12 96.04 35.99 1.66 1.2 3.5 2.91 5.76 5.01 9.11 8.47 26.85 24.96 56.19 24.96h197.76c9.73 0 18.57 3.96 24.96 10.35 6.39 6.39 10.35 15.23 10.35 24.96 0 9.74-3.96 18.57-10.35 24.96-6.39 6.39-15.23 10.35-24.96 10.35H447.21c-5.33 0-10.17 2.16-13.65 5.63a19.28 19.28 0 00-5.63 13.65c0 5.33 2.15 10.17 5.63 13.65a19.28 19.28 0 0013.65 5.63h236.65c10.25 0 20.28-2.14 29.46-6.13 9.22-4.01 17.63-9.89 24.59-17.37l120.17-129a35.15 35.15 0 0111.75-8.33 35.12 35.12 0 0114.09-2.94c8.12 0 15.3 2.65 21.04 6.94 4.48 3.37 8.07 7.74 10.5 12.65 2.44 4.91 3.77 10.38 3.77 15.92 0 7.16-2.2 14.47-7.06 20.94zM145.16 912.47H80.73V623.49h37.13c9.74 0 18.57 3.96 24.96 10.35 6.39 6.39 10.35 15.23 10.35 24.96v253.67h-8.02zm738.78-327.53c-8.75 0-17.37 1.57-25.42 4.54a74.192 74.192 0 00-22.09 12.79l-38.88 40.84c-18.99 20.61-38.19 41.04-57.3 61.55l-4.11-13.19c-4.72-15.21-14.27-28.34-26.83-37.59-12.24-9.01-27.37-14.35-43.73-14.35H467.82c-8.72 0-18.47-7.2-31.81-17.06-25.45-18.8-65.85-48.66-126.17-48.66-22.13 0-43.8 3.9-64.06 11.33-20.31 7.45-39.23 18.45-55.8 32.62l-6.67 5.7-5.07-7.18a74.487 74.487 0 00-26.46-23.1c-10.14-5.27-21.67-8.25-33.9-8.25H61.47c-5.33 0-10.17 2.16-13.65 5.63-3.47 3.5-5.63 8.32-5.63 13.65v327.53c0 5.33 2.16 10.17 5.63 13.65 3.48 3.48 8.31 5.63 13.65 5.63h604.12c28.69 0 56.71-6.84 81.82-19.39 25.15-12.57 47.44-30.89 64.63-53.81l131.04-174.71c10.16-13.54 14.76-28.82 14.76-43.78 0-11.68-2.81-23.19-7.95-33.5-5.17-10.36-12.65-19.54-21.97-26.52-11.87-8.91-26.85-14.37-43.97-14.37z",
    active: true,
    fill: "rgb(46, 171, 108)",
  },
  {
    id: "part4",
    d: "M11.41 886.94V716.53c-.14-.61-.25-1.22-.34-1.85-1.27-9.2 3.5-18.09 11.26-20.97l187.51-69.53v-82.87h-16.59c-9.15 0-16.58-8.48-16.58-18.93 0-10.46 7.43-18.94 16.58-18.94h66.33V389.72c0-1.29.11-2.56.34-3.82 27.62-153.13 187.45-235.29 231.8-255.33V67.92c0-10.45 7.41-18.93 16.58-18.93 9.17 0 16.58 8.48 16.58 18.93v62.65c44.35 20.06 204.18 102.2 231.79 255.32.22 1.26.34 2.53.34 3.82v113.72h49.75c9.17 0 16.58 8.47 16.58 18.94 0 10.45-7.41 18.93-16.58 18.93h-16.58v82.88l187.14 69.39c2.17.74 4.16 1.98 5.86 3.59l.25.24.02.03.27.27c3.33 3.46 5.43 8.46 5.43 14.02v175.2h-33.16V730.65H806.76V951H773.6V730.65H225.12c.6 3.7.94 7.67.94 11.81V951H192.9V742.46c0-4.14.33-8.11.93-11.81H44.58v156.27H11.42zm339 64.07c44.61-88.28 148.88-130.63 154.05-132.67 2.49-.98 5.18-.98 7.67 0 5.17 2.04 109.44 44.39 154.05 132.67h-27.83c-38.9-62.56-112.46-98.02-130.06-105.82-17.6 7.8-91.15 43.26-130.06 105.82H350.4zm-57.67-447.57h431.1V391.7C697.77 254.3 539.8 177.86 508.29 163.89 476.77 177.86 318.8 254.3 292.73 391.7v111.74zm-49.75 113.61h514.02v-75.74H242.99v75.74zm-110.8 75.74h735.59l-102.13-37.87H234.31l-102.13 37.87z",
    active: true,
    fill: "rgb(178, 154, 106)",
  },
  {
    id: "part5",
    d: "M934.13 690.2L796.11 874.22c-14.29 19.06-32.81 34.28-53.71 44.72-20.94 10.47-44.23 16.17-68.01 16.17H175.32V673.06l4.16-2.47c3.31-1.97 6.58-4.12 9.74-6.42 3.07-2.22 6.07-4.63 9-7.21 28.94-25.46 65.23-38.2 101.5-38.2 36.13 0 72.27 12.64 101.15 37.91 1.75 1.27 3.68 3.07 6.06 5.27 9.59 8.93 28.28 26.3 59.18 26.3H674.4c10.25 0 19.56 4.17 26.29 10.9s10.91 16.04 10.91 26.29c0 10.26-4.18 19.57-10.91 26.3s-16.04 10.9-26.29 10.9H444.42c-5.62 0-10.71 2.27-14.37 5.93a20.303 20.303 0 00-5.93 14.37c0 5.62 2.27 10.71 5.93 14.37 3.67 3.66 8.76 5.93 14.37 5.93h249.25c10.79 0 21.36-2.26 31.03-6.46a77.774 77.774 0 0025.9-18.29l126.57-135.87c3.54-3.8 7.74-6.76 12.37-8.78 4.65-2.02 9.69-3.09 14.85-3.09 8.55 0 16.11 2.79 22.16 7.32 4.72 3.54 8.5 8.16 11.06 13.32 2.57 5.17 3.98 10.93 3.98 16.76 0 7.54-2.32 15.24-7.44 22.06zM715.42 108.64c-11.09-13.11-24.8-23.53-40.05-30.74-15.66-7.4-33.04-11.38-50.92-11.38h-.22c-19.91 0-38.37 4.89-54.91 14.41-17.07 9.83-32.48 24.67-45.74 44.22l-2.89 4.41.06.04-2.86 4.53c-5.96 9.98-18.89 13.22-28.87 7.26-3.13-1.87-5.6-4.43-7.33-7.36l-3.5-5.65-2.85-4.29c-13.08-19.02-28.24-33.5-45.01-43.15-16.54-9.52-35-14.42-54.9-14.42l-.24-.01c-17.88.01-35.25 3.99-50.91 11.39-15.72 7.43-29.81 18.27-41.07 31.96a161.384 161.384 0 00-26.84 47.77c-6.11 17.17-9.3 35.46-9.3 54.08l-.07 2.7h.09c0 21.74 3.96 42.53 12.15 63.1 8.43 21.15 21.44 42.48 39.32 64.72 16.07 19.97 35.81 40.4 58.3 61.87 22.33 21.31 48.36 44.49 76.27 69.36l1.35 1.28.04-.04c18.06 16.09 36.71 32.71 63.09 56.84l.13.12.03-.04c.28.26.6.46.92.59.31.12.7.19 1.15.19.45 0 .84-.07 1.15-.19.32-.13.64-.33.91-.59l1.26-1.08c11.6-10.61 22.11-20.09 31.99-28.96 10.55-9.44 21.14-19.34 31.86-28.52 35.48-31.62 66.16-58.96 91.92-84.62 24.93-24.82 48.85-51.19 66.22-80.26 16.65-27.85 27.45-58.66 27.45-93.79l.1-2.67h-.09c0-18.61-3.2-36.9-9.31-54.08-5.96-16.73-14.65-32.47-25.81-46.48-.75-.79-1.44-1.63-2.06-2.53zm-22.07-68.85a161.078 161.078 0 0155.14 42.8l.62.73a203.474 203.474 0 0133.95 60.3c7.74 21.76 11.79 44.8 11.79 68.11h-.09l.07 2.67c0 43.49-13.21 81.35-33.56 115.4-19.61 32.83-45.68 61.66-72.66 88.52-27.46 27.35-58.09 54.66-93.52 86.23-10.51 9.56-21.28 18.95-31.91 28.4-10.8 9.69-21.5 19.35-31.69 28.66l-.89.88a45.177 45.177 0 01-14.28 9c-5.25 2.07-10.85 3.17-16.49 3.17a44.85 44.85 0 01-16.49-3.17 45.112 45.112 0 01-14.28-9l.04-.04c-17.69-16.17-40.58-36.57-62.63-56.22.13-.14-1.23-1.11-1.38-1.24-27.62-24.61-53.38-47.55-77.27-70.35-23.74-22.66-44.72-44.4-62.09-66-20.42-25.41-35.5-50.32-45.59-75.62-10.31-25.88-15.3-51.79-15.3-78.61h.09l-.11-2.7c0-23.31 4.04-46.34 11.78-68.1 7.72-21.7 19.16-42.13 33.95-60.31l.08-.08c15.33-18.66 34.41-33.39 55.67-43.43 21.29-10.06 44.72-15.48 68.7-15.51h.43c27.18 0 52.69 6.86 75.86 20.19 17.88 10.3 34.17 24.41 48.54 42.17 14.37-17.76 30.67-31.88 48.54-42.17 23.17-13.33 48.67-20.19 75.87-20.19h.22c24.04 0 47.55 5.42 68.89 15.51zM126.27 935.11H58.42V630.74h39.11c10.26 0 19.56 4.18 26.29 10.91s10.91 16.04 10.91 26.29v267.18h-8.45zm778.11-344.97a77.69 77.69 0 00-26.78 4.78 78.581 78.581 0 00-23.27 13.46l-40.94 43.02c-20 21.7-40.23 43.23-60.35 64.83l-4.32-13.89c-4.98-16.02-15.04-29.85-28.27-39.59-12.89-9.49-28.82-15.11-46.06-15.11H466.11c-9.19 0-19.45-7.59-33.5-17.96-26.8-19.8-69.36-51.25-132.89-51.25-23.31 0-46.14 4.11-67.47 11.93-21.39 7.85-41.32 19.44-58.77 34.36l-7.03 6.01-5.35-7.56a78.48 78.48 0 00-27.87-24.33c-10.68-5.55-22.83-8.69-35.7-8.69H38.12c-5.61 0-10.71 2.27-14.37 5.93-3.65 3.68-5.93 8.76-5.93 14.37v344.97c0 5.62 2.27 10.71 5.93 14.37 3.66 3.66 8.76 5.93 14.37 5.93h636.29c30.22 0 59.73-7.2 86.18-20.42 26.49-13.24 49.97-32.54 68.07-56.67l138.02-184.02c10.7-14.26 15.54-30.35 15.54-46.1 0-12.3-2.96-24.42-8.38-35.29-5.44-10.91-13.31-20.57-23.13-27.93-12.5-9.38-28.28-15.13-46.31-15.13z",
    active: true,
    fill: "rgb(136, 193, 99)",
  },
  {
    id: "part6",
    d: "M935.69 687.98L797.17 872.65c-14.34 19.13-32.93 34.4-53.91 44.89-21.02 10.51-44.39 16.23-68.26 16.23H174.14V670.78l4.17-2.48c3.33-1.98 6.61-4.13 9.78-6.44 3.08-2.23 6.09-4.65 9.03-7.23 29.04-25.56 65.46-38.34 101.86-38.34 36.26 0 72.53 12.69 101.52 38.04 1.76 1.28 3.69 3.07 6.08 5.29 9.63 8.96 28.38 26.39 59.39 26.39h209.04c10.29 0 19.63 4.19 26.39 10.94 6.75 6.75 10.94 16.09 10.94 26.39 0 10.29-4.19 19.63-10.94 26.39-6.75 6.75-16.1 10.94-26.39 10.94H444.2c-5.64 0-10.75 2.28-14.43 5.95a20.385 20.385 0 00-5.95 14.43c0 5.64 2.28 10.75 5.95 14.42 3.68 3.67 8.79 5.95 14.43 5.95h250.15c10.83 0 21.44-2.26 31.14-6.48a78.185 78.185 0 0025.99-18.36L878.5 640.23c3.56-3.81 7.77-6.79 12.42-8.81a37.31 37.31 0 0114.9-3.1c8.58 0 16.17 2.8 22.24 7.34 4.74 3.56 8.52 8.19 11.1 13.37 2.58 5.19 3.99 10.97 3.99 16.82 0 7.57-2.33 15.3-7.46 22.14zm-595.3-406.02h150.45v-46.35H340.39v46.35zm0-93.38h197.15v-46.35H340.39v46.35zm429.95 175.44h-85.78v-85.78h-46.34v85.78h-85.78v46.35h85.78v85.78h46.34v-85.78h85.78v-46.35zM276.02 71.85h362.2v151.92h46.34V25.5H229.67v396.54h227.44V375.7h-181.1V71.85zM124.93 933.78h-68.1V628.32h39.25c10.29 0 19.63 4.19 26.39 10.94 6.75 6.75 10.94 16.09 10.94 26.39v268.13h-8.48zm780.9-346.21c-9.25 0-18.35 1.67-26.87 4.8a78.786 78.786 0 00-23.35 13.51l-41.09 43.18c-20.07 21.78-40.37 43.38-60.56 65.06l-4.34-13.94c-4.99-16.08-15.09-29.95-28.37-39.73-12.93-9.53-28.93-15.17-46.23-15.17H465.99c-9.22 0-19.52-7.61-33.62-18.03-26.9-19.87-69.61-51.43-133.37-51.43-23.4 0-46.3 4.12-67.71 11.98-21.46 7.88-41.46 19.5-58.98 34.48l-7.06 6.03-5.36-7.59a78.763 78.763 0 00-27.97-24.42c-10.72-5.57-22.91-8.72-35.83-8.72H36.46c-5.64 0-10.75 2.28-14.43 5.95-3.67 3.69-5.95 8.8-5.95 14.42v346.21c0 5.64 2.28 10.74 5.95 14.42 3.68 3.67 8.79 5.95 14.43 5.95h638.57c30.33 0 59.94-7.23 86.49-20.5 26.58-13.29 50.15-32.65 68.31-56.87l138.51-184.68c10.74-14.31 15.59-30.46 15.59-46.27 0-12.35-2.97-24.51-8.41-35.42-5.46-10.95-13.37-20.65-23.22-28.04-12.55-9.42-28.38-15.19-46.48-15.19z",
    active: true,
    fill: "rgb(58, 193, 125)",
  },
];
type TreeItem = {
  title: string;
  key: string;
  path?: string;
  children?: TreeItem[];
};

type AccordionItem = {
  title: string;
  key: string;
  content: TreeItem[];
};

type RawAccordionItem = {
  title: string;
  processes: number;
  _children?: RawAccordionItem[];
  id?: string | number;
};

interface AccordionProps {
  api: string;
}

type TreeViewProps = {
  data: TreeItem[];
  activeFill?: string;
  icons: {
    defaultIcon: string;
    hoverIcon: string;
  };
  titleStack: string[];
  setTitleStack: React.Dispatch<React.SetStateAction<string[]>>;
};

const iconsMap: Record<string, { defaultIcon: string; hoverIcon: string }> = {
  "accordion-part1": { defaultIcon: img1, hoverIcon: img2 },
  "accordion-part2": { defaultIcon: img3, hoverIcon: img4 },
  "accordion-part3": { defaultIcon: img5, hoverIcon: img6 },
  "accordion-part4": { defaultIcon: img7, hoverIcon: img8 },
  "accordion-part5": { defaultIcon: img9, hoverIcon: img10 },
  "accordion-part6": { defaultIcon: img11, hoverIcon: img12 },
};

const updatePathDataActive = (key: string | null) => {
  return pathData.map((item) => ({
    ...item,
    active: `accordion-${item.id}` === key,
  }));
};

const convertToTreeItems = (arr: RawAccordionItem[] = []): TreeItem[] => {
  return arr.map((item, index) => ({
    title: item.title,
    key: item.id?.toString() || `item-${index}`,
    path: item.id ? `/details/${item.id}` : undefined,
    children: item._children ? convertToTreeItems(item._children) : undefined,
  }));
};

const TreeView: React.FC<TreeViewProps> = ({
  data,
  activeFill,
  icons,
  titleStack,
  setTitleStack,
}) => {
  const navigate = useNavigate();
  const [navigationStack, setNavigationStack] = useState<TreeItem[][]>([data]);
  const currentLevel = navigationStack[navigationStack.length - 1];

  const enterChild = (title: string, children: TreeItem[]) => {
    setNavigationStack((prev) => [...prev, children]);
    setTitleStack((prev) => [...prev, title]);
  };

  const goBack = () => {
    setNavigationStack((prev) => (prev.length > 1 ? prev.slice(0, -1) : prev));
    setTitleStack((prev) => (prev.length > 1 ? prev.slice(0, -1) : prev));
  };

  return (
    <div className={styles.treeBox}>
      {titleStack.length > 1 && (
        <div className={styles.backButtonAccordin} onClick={goBack}>
          <FaAngleLeft style={{ color: activeFill }} />
          <span style={{ color: activeFill }}>
            {titleStack[titleStack.length - 2]}
          </span>
        </div>
      )}

      <ul className={styles.treeList}>
        {currentLevel.map((item) => (
          <li key={item.key}>
            <div className={styles.treeItem}>
              <span className={styles.iconWrapper}>
                <img
                  src={icons.defaultIcon}
                  className={styles.defaultIcon}
                  alt="default"
                />
                <img
                  src={icons.hoverIcon}
                  className={styles.hoverIcon}
                  alt="hover"
                />
              </span>

              {item.children ? (
                <span
                  // className={styles.treeItem}
                  onClick={() => enterChild(item.title, item.children!)}
                >
                  {item.title}
                </span>
              ) : (
                <Link to={`services/${item.key}`}>{item.title}</Link>
              )}
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
};

const AccordionTree: React.FC<AccordionProps> = ({ api }) => {
  const [items, setItems] = useState<AccordionItem[]>([]);
  const [activeKey, setActiveKey] = useState<string | null>(null);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);
  const [updatedPathData, setUpdatedPathData] = useState(pathData);
  const [titleStack, setTitleStack] = useState<string[]>([]);
  const [activeItem, setActiveItem] = useState<AccordionItem | null>(null);

  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        const res = await fetch(api);
        if (!res.ok) throw new Error("خطا در دریافت اطلاعات");
        const result = await res.json();

        const convertedItems: AccordionItem[] = (
          result.data as RawAccordionItem[]
        ).map((item, index) => ({
          title: item.title,
          key: `accordion-part${index + 1}`,
          content: convertToTreeItems(item._children || []),
        }));

        setItems(convertedItems);
        if (convertedItems.length > 0) {
          setActiveKey(convertedItems[0].key);
        }
      } catch (err: any) {
        setError(err.message || "خطای ناشناخته");
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [api]);

  useEffect(() => {
    setUpdatedPathData(updatePathDataActive(activeKey));

    if (activeKey) {
      const item = items.find((i) => i.key === activeKey);
      if (item) {
        setActiveItem(item);
        setTitleStack([item.title]);
      }
    } else {
      setActiveItem(null);
      setTitleStack([]);
    }
  }, [activeKey, items]);

  const activeItemIndex = items.findIndex((i) => i.key === activeKey);
  const activeFill = updatedPathData[activeItemIndex]?.fill || "#b29a6a";

  if (loading) {
    return (
      <div className={styles.loadingBox}>
        <span className={styles.loadingSpinner}></span>

        <span className={styles.spinner} />
      </div>
    );
  }

  if (error) {
    return (
      <div className={styles.errorBox}>
        <div className={styles.errorText}>❌ {error}</div>
      </div>
    );
  }

  return (
    <div className={styles.accordionTree}>
      <Row>
        {items.map((item, index) => (
          <Col key={item.key} lg={2} md={4} sm={6}>
            <div
              className={styles.accordionHeaderBox}
              onClick={() =>
                setActiveKey(activeKey === item.key ? null : item.key)
              }
            >
              <SVGIcon paths={[updatedPathData[index]]} />
              {item.title}
            </div>
            {activeKey === item.key && (
              <div
                className={styles.activeLine}
                style={{
                  height: "4px",
                  backgroundColor: updatedPathData[index]?.fill || "#FF6B6B",
                  borderRadius: "5px",
                  marginTop: "10px",
                  transition: "all 0.3s ease",
                }}
              />
            )}
          </Col>
        ))}
      </Row>

      {activeItem && (
        <Row className={styles.accordionContentRow}>
          <div className={styles.accordionContentChildren}>
            <Row>
              <div
                className={styles.parentTitle}
                style={{
                  color: activeFill,
                  fontWeight: "bold",
                  fontSize: "12px",
                  marginBottom: "1rem",
                  fontFamily: "vazir",
                }}
              >
                {titleStack[titleStack.length - 1]}
              </div>
            </Row>

            <Row>
              <Col lg={12}>
                <TreeView
                  key={activeKey}
                  data={activeItem.content}
                  activeFill={activeFill}
                  icons={
                    iconsMap[activeKey || ""] || {
                      defaultIcon: "",
                      hoverIcon: "",
                    }
                  }
                  titleStack={titleStack}
                  setTitleStack={setTitleStack}
                />
              </Col>
            </Row>
          </div>
        </Row>
      )}
    </div>
  );
};

export default AccordionTree;
